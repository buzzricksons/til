# HTTP/2
- RFC7540(2015年)
- 클라이언트와 서버가 HTTP 1.1, 2.0 혹은 다른 비 HTTP 프로토콜 사용을 협상할 수 있는 메카니즘 구현
- HTTP 1.1과 호환성 유지
- 다음과 같은 방법들을 이용하여 지연 시간을 감소시켜 웹 브라우저의 페이지 로드 속도 개선
    - HTTP 헤더 데이터 압축
    - 서버 푸시 기술
    - 요청을 HTTP 파이프라인(리퀘스트와 레스폰스가 담긴 스트림)으로 처리
    - HTTP 1.x의 HOL blocking 문제 해결
    - TCP 연결 하나로 여러 요청을 다중화 처리
- 데스크탑 브라우저, 모바일 웹 브라우저, 웹 API, 웹 서버, 프록시 서버, 리버스 프록시 서버, 방화벽, 콘텐츠 전송 네트워크 등 자주 쓰이는 것들을 지원

## HTTP/1.1の欠点とHTTP/2の特長
Web高速化のための機能

### HTTP/1.1 の欠点
- 原則として１つのリクエストの完了を待ってから、次のリクエストを送信
- HTTPパイプラインを使用する場合の、Head-of-Line Blocking の発生

![](https://github.com/buzzricksons/til/blob/master/_Image/Http/pipeline.png)

```
このような同時ダウンロードの制約があるHTTP/1.1は「HTTPパイプライン」という仕組みを利用し、
前回リクエストの完了を待たずに次のリクエストを送信することが可能とされています。
しかし、パイプラインはサーバー側できちんとした対応がされていないと、ブラウザ側のリクエストを正しく
処理できないということになり実装にも課題がありました。
さらに、HTTPパイプラインには「サーバーはリクエストの順番通りにレスポンスを返さなければならない」という制限があります。

これは、５個あるリクエストのうち１番目のリクエスト処理が遅い場合、
２個目以降のレスポンスは待ち状態（ヘッドオブラインブロッキング）になり結果全体の速度が遅くなるといった課題があります。
このような状況から、パイプラインはOPERAブラウザを除きほとんどのモダンブラウザはデフォルトでOFFになっており、
残念ながらほとんど利用されていないのが現状です。
```

### HTTP/1.1のWeb高速化の取り組み
- CSS スプライト
- インライン・イメージ
- ドメイン・シャーディング

### HTTP/2 の特長
- ストリーム(リクエスト/レスポンス)の多重化
- ストリーム優先度
- Server Push
- ヘッダー圧縮
- バイナリー・フレーム

## Servlet 4.0
HTTP/2 対応

![](https://github.com/buzzricksons/til/blob/master/_Image/Http/servlet4.png)

### Server Push
- HTTP/1.1 までは、通常１つのTCPコネクション上で、１対のリクエスト/レスポンス。(１つのリクエストが完了するまで、原則次のリクエストを送ることができない。)
- HTTP/2 では、同一のTCPコネクション上でクライアントからのリクエストを待たずにサーバサイドからプロアクティブに複数のコンテンツレスポンスを返す事ができるようになる。

### プロトコルネゴシエーション
- ALPN(Application-Layer Protocol Negotiation)
- JDK 8 による ALPN サポート

## HTTP/2リンク集
- https://blog.redbox.ne.jp/http2-cdn.html

# サーブページ
